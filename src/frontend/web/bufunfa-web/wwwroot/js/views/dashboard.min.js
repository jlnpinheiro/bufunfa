var Dashboard=function(){var n=function(){$.get(App.corrigirPathRota("/dashboard/listar-parcelas-para-timeline"),{dataInicio:$("#iProcurarDataInicio").val(),dataFim:$("#iProcurarDataFim").val(),somenteParcelasAbertas:$("#cExibirParcelasAbertasTimeline").prop("checked")},function(n){$("#div-timeline").html(n);$("a[class*='visualizar-agendamento']").each(function(){let n=$(this).data("id-agendamento");$(this).click(function(t){t.preventDefault();Bufunfa.manterAgendamento(n)})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},t=function(){$.get(App.corrigirPathRota("/dashboard/listar-contas"),function(n){$("#div-listar-contas").html(n);$("button[class*='lancamentos']").each(function(){let n=$(this).data("id-conta");$(this).click(function(t){t.preventDefault();location.href=App.corrigirPathRota("/lancamentos?id="+n)})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},i=function(){$.get(App.corrigirPathRota("/dashboard/listar-cartoes"),function(n){$("#div-listar-cartoes").html(n);$("button[class*='consultar-fatura']").each(function(){let n=$(this).data("id-cartao"),t=$(this).data("mes"),i=$(this).data("ano");$(this).click(function(r){r.preventDefault();Bufunfa.exibirFatura(n,t,i)})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},r=function(){$.get(App.corrigirPathRota("/dashboard/listar-acoes"),function(n){$("#div-listar-acoes").html(n);$("button[class*='detalhar-acao']").each(function(){let n=$(this).data("id-acao");$(this).click(function(t){t.preventDefault();Bufunfa.exibirAcao(n)})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},u=function(n){AppModal.exibirPorRota(App.corrigirPathRota("/dashboard/exibir-popup-detalhar-investimentos-"+(n==="RF"?"renda-fixa":"renda-variavel")),function(){KTApp.initTooltips();$("button[class*='btn-detalhar-ativo']").each(function(){let n=$(this).data("id-acao");$(this).click(function(t){t.preventDefault();Bufunfa.exibirAcao(n,!1)})})},!0,"popup-detalhar-investimentos")};return{init:function(){n();t();i();r();$("#btn-detalhar-investimentos-rf").click(function(){u("RF")});$("#btn-detalhar-investimentos-rv").click(function(){u("RV")});$.validator.addMethod("periodo_valido",function(){let n=moment($("#iProcurarDataInicio").val(),"DD/MM/YYYY").toDate(),t=moment($("#iProcurarDataFim").val(),"DD/MM/YYYY").toDate();return n<=t},"Período inválido.");$("#form-filtro-parcelas-timeline").validate({rules:{iProcurarDataInicio:{required:!0,periodo_valido:!0},iProcurarDataFim:{required:!0,periodo_valido:!0}},submitHandler:function(){n()}});$(".datepicker").datepicker({autoclose:!0,language:"pt-BR",todayBtn:"linked",todayHighlight:!0});$(".datepicker").inputmask({alias:"datetime",inputFormat:"dd/mm/yyyy",placeholder:"dd/mm/aaaa",clearIncomplete:!0});Bufunfa.criarSelectPeriodo({selector:"#sProcurarPeriodo",dropDownParentSelector:"#portlet-timeline",obrigatorio:!1,callbacks:{selecionar:function(){if($("#sProcurarPeriodo").select2("data").length){let n,t=null;$("#sProcurarPeriodo").select2("data")[0].dataInicio!=null&&$("#sProcurarPeriodo").select2("data")[0].dataFim!=null?(n=moment($("#sProcurarPeriodo").select2("data")[0].dataInicio,"DD/MM/YYYY"),t=moment($("#sProcurarPeriodo").select2("data")[0].dataFim,"DD/MM/YYYY")):(n=moment($("#sProcurarPeriodo").find(":selected").attr("data-dataInicio"),"DD/MM/YYYY"),t=moment($("#sProcurarPeriodo").find(":selected").attr("data-dataFim"),"DD/MM/YYYY"));$("#iProcurarDataInicio").datepicker("update",n.format("DD-MM-YYYY"));$("#iProcurarDataFim").datepicker("update",t.format("DD-MM-YYYY"));$("#iProcurarDataInicio").attr("disabled",!0);$("#iProcurarDataFim").attr("disabled",!0);$("#iProcurarDataInicio").valid();$("#iProcurarDataFim").valid()}else $("#iProcurarDataInicio").datepicker("clearDates"),$("#iProcurarDataFim").datepicker("clearDates"),$("#iProcurarDataInicio").attr("disabled",!1),$("#iProcurarDataFim").attr("disabled",!1)}}})},atualizar:function(){n();t();i();r()}}}();jQuery(document).ready(function(){Dashboard.init()});