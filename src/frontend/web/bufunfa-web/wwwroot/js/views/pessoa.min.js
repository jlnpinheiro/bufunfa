var Pessoa=function(){var t=function(){$("#tblPessoa").DataTable({ajax:{url:App.corrigirPathRota("/pessoas/listar-pessoas"),type:"POST",error:function(n){let t=Feedback.converter(n.responseJSON);t.exibir()}},info:!0,columns:[{data:"nome",title:"Nome",orderable:!0,className:"all"},{data:null,className:"text-center",orderable:!1,width:"1px",render:function(n,t,i){return'<button class="btn btn-clean btn-sm btn-icon btn-icon-sm btn-datatables alterar-pessoa" data-id="'+i.id+'" data-toggle="kt-tooltip" data-boundary="window" data-placement="top" data-original-title="Alterar"><span class="la la-edit"><\/span><\/button>'}},{data:null,className:"text-center",orderable:!1,width:"1px",render:function(n,t,i){return'<button class="btn btn-clean btn-sm btn-icon btn-icon-sm btn-datatables excluir-pessoa" data-id="'+i.id+'" data-toggle="kt-tooltip" data-boundary="window" data-placement="top" data-original-title="Excluir"><span class="la la-trash"><\/span><\/button>'}}],select:{style:"single",info:!1},serverSide:!0,responsive:!1,order:[0,"asc"],searching:!0,paging:!0,pageLength:50,lengthChange:!0}).on("draw.dt",function(){KTApp.initTooltips();$("button[class*='alterar-pessoa']").each(function(){let t=$(this).data("id");$(this).click(function(){n(t)})});$("button[class*='excluir-pessoa']").each(function(){let n=$(this).data("id");$(this).click(function(){AppModal.exibirConfirmacao("Deseja realmente excluir essa pessoa?","Sim","NÃ£o",function(){i(n)})})})})},n=function(n){let t=n===null||n===undefined||n===0;AppModal.exibirPorRota(t?App.corrigirPathRota("/pessoas/cadastrar-pessoa"):App.corrigirPathRota("/pessoas/alterar-pessoa?id="+n),function(){$("#form-manter-pessoa").validate({rules:{iNome:{required:!0}},submitHandler:function(){let n={Id:$("#iIdPessoa").val(),Nome:$("#iNome").val()};$.post(App.corrigirPathRota(t?"/pessoas/cadastrar-pessoa":"/pessoas/alterar-pessoa"),{entrada:n}).done(function(n){let t=Feedback.converter(n);t.tipo=="SUCESSO"?(AppModal.ocultar(),t.exibir(function(){$("#tblPessoa").DataTable().ajax.reload()})):t.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})}})})},i=function(n){$.post(App.corrigirPathRota("/pessoas/excluir-pessoa?id="+n),function(n){let t=Feedback.converter(n);t.tipo=="SUCESSO"?($("#tblPessoa").DataTable().ajax.reload(),t.exibir(function(){AppModal.ocultar()})):t.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})};return{init:function(){t();$("#tblPessoa_filter input").attr("placeholder","Procurar");$("#btn-cadastrar-pessoa").click(function(){n()})}}}();jQuery(document).ready(function(){Pessoa.init()});