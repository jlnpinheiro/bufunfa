(function(n){"use strict";function t(n,t){var i=parseInt(n.slice(1),16),r=Math.round(2.55*t||0),u=(i>>16)+r,f=(i>>8&255)+r,e=(i&255)+r;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(f<255?f<1?0:f:255)*256+(e<255?e<1?0:e:255)).toString(16).slice(1).toUpperCase()}var r={shape:"circle",color:"#82BF41",background:"#4C4C52",stroke:"#23282F",textColor:"#FFFFFF",fontFamily:"Open Sans",fontSize:"24px",fontWeight:"600",liquidOpacity:.9,liquidPalette:["#82BF41"],speed:3e3,animate:!0},i=function(t,i){if(typeof Snap=="undefined")throw"Snap.js not found.";this.meter=n(t);this.options=i;this.options.text=this.meter.text();this.init()};i.prototype={init:function(){var i,t;return this.wrapper=this.meter.parent(".liquid-meter"),this.wrapper.get(0)||(i=n("<div>").attr({"class":"liquid-meter"}),this.wrapper=this.meter.wrap(i).parent()),t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("viewBox","0 0 220 220"),this.wrapper.prepend(t),this.svg=n(t).attr({width:"100%",height:"100%"}),this.frames=[[6,-6,-10,6,13,-10],[6,-5,-13,4,31,-5],[7,-5,-9,0,31,-5],[7,-5,-9,-6,30,-6],[6,-10,-10,-10,33,-4],[8,-4,-8,-13,38,7],[8,-8,-5,-15,55,11],[7,-19,-2,-16,33,16],[3,-23,-2,-16,42,21],[3,-22,7,-18,27,21],[2,-26,15,-18,25,20],[-3,-23,18,-18,26,19],[-6,-40,18,-18,22,22],[-15,-16,23,-13,37,22],[-15,-16,23,-13,37,22],[-17,-16,23,-10,33,22],[-18,-16,23,-10,35,21],[-20,-12,23,-5,34,20],[-22,-13,20,-1,35,22],[-22,-13,20,5,32,21],[-21,-16,19,8,34,15],[-23,-16,16,10,36,9],[-22,-23,13,10,48,0],[-23,-20,13,8,45,-6],[-20,-22,7,10,44,-6],[-20,-22,5,10,42,-7],[-18,-20,0,10,41,-8],[-15,-22,-7,10,41,-8],[-11,-33,-8,10,41,-8],[-7,-36,-6,10,15,-11],[0,-39,-8,10,15,-11],[0,-36,-8,7,15,-11],],this.paper=Snap(t),this.draw(),this.observe(),this.options.animate?this.animate():this.drawFrame(1),this.wrapper.addClass("liquid-meter-loaded"),this},draw:function(){var n,r,i;return this.value=parseInt(this.meter.val()||this.meter.attr("value"),10),n=this.paper,this.recipient=n.circle(110,110,95),r=this.makeGradient(this.options.background),this.recipient.attr({fill:r,stroke:this.options.stroke,strokeWidth:15}),i=n.circle(110,110,87),i.attr({fill:"#FFFFFF"}),this.liquid=n.path(),this.liquid.attr({id:"front",fill:this.options.color,mask:i,stroke:t(this.options.color,20),strokeWidth:1}),this.label=n.text("50%","50%",[this.value,"%"]),this.label.attr({fill:this.options.textColor,dy:".4em","font-family":this.options.fontFamily,"font-size":this.options.fontSize,"font-weight":this.options.fontWeight,"text-anchor":"middle",stroke:this.options.textColor}),this.label.selectAll("tspan:nth-child(2)").attr({"font-size":"24",stroke:"none"}),this},observe:function(){var t=this;this.meter.on("change",function(){t.set(n(this).val())})},set:function(n){var t=parseInt(n,10);this.meter.val(t);this.value=t;this.label.node.textContent=t+"%"},liquidPalette:function(n){this.options.liquidPalette=n},background:function(n){this.options.background=n},stroke:function(n){this.options.stroke=n},color:function(n){this.options.color=n;this.liquid.attr({fill:this.options.color,stroke:t(this.options.color,20)})},makeGradient:function(n){return this.paper.gradient(Snap.format("L(0, 0, 100, 100){color.top}-{color.bottom}",{color:{top:t(n,6),bottom:n}}))},makePath:function(n,t,i,r,u,f,e){var o=(100-n)*1.76+22;return Snap.format("M0,{left} C{curve.x1},{curve.y1} {curve.x2},{curve.y2} 220,{right} L220,220 L0,220 z",{left:o-(t||0),right:o-(u||0),curve:{x1:i+o,y1:r+o,x2:f+o,y2:e+o}})},drawFrame:function(n){var t=this.frames[n-1],i=t[0],r=t[1],u=t[2],f=t[3],e=t[4],o=t[5];this.liquid.attr({d:this.makePath(this.value,i,r,u,f,e,o)})},animate:function(){function i(){r(function(){e()});setTimeout(i,u)}function e(){f(n);n++;n>=t&&(n=1)}var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,0)},t=this.frames.length,u=this.options.speed/t,n=1,f=this.drawFrame.bind(this);return i(),this}};n.fn.liquidMeter=function(t,u){var f=typeof t=="string"&&!!u;return f||(t=n.extend({},r,t)),this.map(function(){var r=n(this).data("liquid-meter");return r||(r=new i(this,t),n(this).data("liquid-meter",r)),f&&r[t](u),r})}})(jQuery);