var Conta=function(){var n=function(n){$.get(App.corrigirPathRota("/contas/listar-contas?tipo="+n),function(t){n=="RF"?(App.desbloquear($("#portlet-renda-fixa")),$("#divRendaFixa").html(t)):(App.desbloquear($("#portlet-renda-variavel")),$("#divRendaVariavel").html(t));n=="RV"&&$("button[class*='detalhar-conta-"+n.toLowerCase()+"']").each(function(){let n=$(this).data("id-conta");$(this).click(function(){Bufunfa.exibirAcao(n)})});$("button[class*='alterar-conta-"+n.toLowerCase()+"']").each(function(){let n=$(this).data("id-conta"),t=$(this).data("tipo");$(this).click(function(){i(n,t)})});$("button[class*='excluir-conta-"+n.toLowerCase()+"']").each(function(){let n=$(this).data("id-conta"),t=$(this).data("tipo");$(this).click(function(){AppModal.exibirConfirmacao("Deseja realmente excluir essa conta?","Sim","Não",function(){u(n,t)})})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},t=function(){$.get(App.corrigirPathRota("/cartoes/listar-cartoes"),function(n){$("#divCartoes").html(n);$("button[class*='alterar-cartao']").each(function(){let n=$(this).data("id-cartao");$(this).click(function(){r(n)})});$("button[class*='excluir-cartao']").each(function(){let n=$(this).data("id-cartao");$(this).click(function(){AppModal.exibirConfirmacao("Deseja realmente excluir esse cartão?","Sim","Não",function(){f(n)})})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},i=function(t,i){let r=t===null||t===undefined||t===0;AppModal.exibirPorRota(r?App.corrigirPathRota("/contas/cadastrar-conta?tipo="+i):App.corrigirPathRota("/contas/alterar-conta?idConta="+t),function(){if($("#form-manter-conta").validate({rules:{iNome:{required:!0},sTipo:{required:!0}},submitHandler:function(){let t={Id:$("#iIdConta").val(),Nome:$("#iNome").val(),Tipo:i=="RF"?$("#sTipo").val():4,ValorSaldoInicial:$("#iSaldoInicial").val(),NomeInstituicao:$("#iNomeInstituicao").val(),Numero:$("#iNumero").val(),NumeroAgencia:$("#iNumeroAgencia").val()};$.post(App.corrigirPathRota(r?"/contas/cadastrar-conta":"/contas/alterar-conta"),{entrada:t}).done(function(t){let r=Feedback.converter(t);r.tipo=="SUCESSO"?(AppModal.ocultar(),r.exibir(function(){n(i)})):r.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})}}),i=="RF"){$("#sTipo").select2({allowClear:!1,placeholder:"Selecione um tipo",dropdownParent:$(".jc-bs3-container"),minimumResultsForSearch:-1,escapeMarkup:function(n){return n},templateResult:function(n){return"<b>"+n.text+"<\/b><br/>"+$(n.element).data("descricao")}}).on("change",function(){$(this).valid()});$("#iCodigoTipo").val()!=""&&$("#sTipo").val($("#iCodigoTipo").val()).trigger("change");$("#iSaldoInicial").inputmask("decimal",{radixPoint:",",groupSeparator:".",autoGroup:!0,digits:2,digitsOptional:!1,placeholder:"0",rightAlign:!1,prefix:""})}})},r=function(n){let i=n===null||n===undefined||n===0;AppModal.exibirPorRota(i?App.corrigirPathRota("/cartoes/cadastrar-cartao"):App.corrigirPathRota("/cartoes/alterar-cartao?id="+n),function(){$("#iValorLimite").inputmask("decimal",{radixPoint:",",groupSeparator:".",autoGroup:!0,digits:2,digitsOptional:!1,placeholder:"0",rightAlign:!1,prefix:""});$("#iDiaVencimentoFatura").inputmask({mask:"9",repeat:2,greedy:!1});$("#form-manter-cartao-credito").validate({errorClass:"has-error help-block",rules:{iNome:{required:!0},iDiaVencimentoFatura:{required:!0,min:1,max:31},iValorLimite:{required:!0}},submitHandler:function(){let n={Id:$("#iIdCartaoCredito").val(),Nome:$("#iNome").val(),DiaVencimentoFatura:$("#iDiaVencimentoFatura").val(),ValorLimite:$("#iValorLimite").val()};$.post(App.corrigirPathRota(i?"/cartoes/cadastrar-cartao":"/cartoes/alterar-cartao"),{entrada:n}).done(function(n){let i=Feedback.converter(n);i.tipo=="SUCESSO"?(AppModal.ocultar(),i.exibir(function(){t()})):i.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})}})})},u=function(t,i){$.post(App.corrigirPathRota("/contas/excluir-conta?id="+t),function(t){let r=Feedback.converter(t);r.tipo=="SUCESSO"&&n(i);r.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},f=function(n){$.post(App.corrigirPathRota("/cartoes/excluir-cartao?id="+n),function(n){let i=Feedback.converter(n);i.tipo=="SUCESSO"?(t(),i.exibir()):i.exibir()}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibir()})};return{init:function(){n("RF");n("RV");t();$("#btn-cadastrar-renda-fixa").click(function(){i(null,"RF")});$("#btn-cadastrar-renda-variavel").click(function(){i(null,"RV")});$("#btn-cadastrar-cartao-credito").click(function(){r(null)})},atualizar:function(){n("RF");n("RV")}}}();jQuery(document).ready(function(){Conta.init()});